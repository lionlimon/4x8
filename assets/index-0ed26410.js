import{a as g,w as T,v as D,u as s,o as d,b as l,i as S,r as F,k as I,j as E,e as r,g as B,h as o,x as z,y as R,l as p,F as $,p as q,T as N,f as V,z as L,A as j,m as k,q as G,s as H}from"./index-b5a87a65.js";import{u as J,B as K,T as O,M as P,f as b}from"./formatDate-6d81264a.js";import{u as Q,_ as y,V as A,a as w}from"./VButton-85ab61eb.js";import{V as W}from"./VCounter-1a991b3a.js";const X=g({__name:"VMiniInput",props:{modelValue:{}},emits:["update:modelValue"],setup(i,{emit:a}){const t=Q(i,"modelValue",a);return(_,e)=>T((d(),l("input",{class:"mini-input","onUpdate:modelValue":e[0]||(e[0]=n=>S(t)?t.value=n:null)},null,512)),[[D,s(t)]])}});const Y=y(X,[["__scopeId","data-v-943a0bae"]]),U=i=>(z("data-v-33b13afe"),i=i(),R(),i),Z={class:"exercise-approach"},ee={class:"exercise-approach__head"},ae={class:"exercise-approach__count"},se={class:"exercise-approach__actions"},te={class:"exercise-approach__actions-group"},ne=U(()=>r("div",{class:"exercise-approach__actions-title"},"Повторения",-1)),oe={class:"exercise-approach__actions-group"},re=U(()=>r("div",{class:"exercise-approach__actions-title"},"Вес",-1)),ie=g({__name:"ExerciseApproach",props:{approach:{},index:{}},emits:["delete-click","update-approach"],setup(i,{emit:a}){const t=F({...i.approach});I(t,()=>a("update-approach",{...t}));const _=E();return(e,n)=>(d(),l("div",Z,[r("div",ee,[r("div",ae,B(e.index+1)+" подход ",1),r("button",{class:"exercise-approach__delete",onClick:n[0]||(n[0]=c=>a("delete-click",e.index))},[o(s(A),{name:"trash",width:"18",height:"18"})])]),r("div",se,[r("div",te,[ne,o(s(W),{modelValue:t.reps,"onUpdate:modelValue":n[1]||(n[1]=c=>t.reps=c)},null,8,["modelValue"])]),r("div",oe,[re,o(s(Y),{ref_key:"input",ref:_,inputmode:"numeric",type:"number",modelValue:t.weight,"onUpdate:modelValue":n[2]||(n[2]=c=>t.weight=c)},null,8,["modelValue"])])])]))}});const ce=y(ie,[["__scopeId","data-v-33b13afe"]]),pe={class:"exercise"},de={class:"exercise__approaches"},le={class:"exercise__actions"},_e=g({__name:"Exercise",props:{exercise:{}},emits:["add-approach-click","delete-approach-click","change-name","update-approach"],setup(i,{emit:a}){const t=E(i.exercise.name??"");return I(t,()=>a("change-name",t.value)),(_,e)=>(d(),l("div",pe,[T(r("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>t.value=n),placeholder:"Введите название упражнения",type:"text",class:"exercise__name"},null,512),[[D,t.value]]),r("ul",de,[o(N,{name:"fade"},{default:p(()=>[(d(!0),l($,null,q(_.exercise.approaches,(n,c)=>(d(),l("li",{key:n.id??c,class:"exercise__approach"},[o(s(ce),{approach:n,index:c,onDeleteClick:e[1]||(e[1]=h=>a("delete-approach-click",h)),onUpdateApproach:h=>a("update-approach",c,h)},null,8,["approach","index","onUpdateApproach"])]))),128))]),_:1})]),r("div",le,[o(s(w),{variant:"outline",wide:"",onClick:e[2]||(e[2]=n=>a("add-approach-click"))},{default:p(()=>[o(s(A),{name:"plus"}),V(" Добавить подход ")]),_:1})])]))}});const ue=y(_e,[["__scopeId","data-v-e4175779"]]),he={key:0,class:"training__exercises"},me=g({__name:"training",setup(i){const a=L(),f=j(),t=k(()=>a.query.date?b(new Date(a.query.date)):b(new Date)),_=k(()=>a.query.date?e.getTrainingByDate(new Date(a.query.date)):e.todayTraining),e=J();!e.todayTraining&&a.query.mode==="new-training"&&e.startTraining(),a.query.date&&e.startTrainingByDate(new Date(a.query.date));const n=(m,v)=>{e.setExerciseName(m,v)},c=()=>{a.query.mode==="new-training"&&e.finishExercise(),f.push({name:"home"})},h=k(()=>{var m;return a.query.mode==="new-training"&&!((m=e.todayTraining)!=null&&m.isFinished)?"Завершить":"Сохранить"});return(m,v)=>(d(),G(s(K),{class:"training"},{header:p(()=>[o(s(O),{"back-link":"/",title:t.value,"screen-title":"Тренировка"},null,8,["title"])]),footer:p(()=>[o(s(P),{class:"training__footer"},{default:p(()=>[o(s(w),{disabled:!s(e).canAddExercise,variant:"outline",size:"m",wide:"",onClick:v[0]||(v[0]=C=>s(e).addExercise())},{default:p(()=>[o(s(A),{name:"plus"}),V(" Добавить упражнение ")]),_:1},8,["disabled"]),o(s(w),{size:"m",wide:"",onClick:c},{default:p(()=>[V(B(h.value),1)]),_:1})]),_:1})]),default:p(()=>[_.value?(d(),l("ul",he,[o(N,{name:"fade"},{default:p(()=>[(d(!0),l($,null,q(_.value.exercises,(C,x)=>(d(),l("li",{class:"training__exercise",key:x},[o(s(ue),{exercise:C,onChangeName:u=>n(u,x),onAddApproachClick:u=>s(e).addApproach(x),onDeleteApproachClick:u=>s(e).deleteApproach({approachIndex:u,exerciseIndex:x}),onUpdateApproach:(u,M)=>s(e).setApproach({approach:M,approachIndex:u,exerciseIndex:x})},null,8,["exercise","onChangeName","onAddApproachClick","onDeleteApproachClick","onUpdateApproach"])]))),128))]),_:1})])):H("",!0)]),_:1}))}});const ye=y(me,[["__scopeId","data-v-91a528db"]]);export{ye as Training};
