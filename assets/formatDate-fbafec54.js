import{a as T,j as B,o as n,b as u,B as _,s as h,e as y,n as F,C as I,q as N,l as H,h as C,u as L,f as V,g as k,d as O,A as K,m}from"./index-5f8c9ba0.js";import{_ as g,V as M,b as R}from"./VButton-55b85e5c.js";const j={key:0,class:"base-layout__header"},U={class:"base-layout__content container"},q={key:1,class:"base-layout__footer"},z=T({__name:"BaseLayout",props:{staticHeader:{type:Boolean},noScroll:{type:Boolean}},emits:["on-scroll-end"],setup(a,{emit:c}){const i=a,t=B(null),f=()=>({"base-layout--static-header":i.staticHeader,"base-layout--no-scroll":i.noScroll}),d=()=>{if(!t.value)return;const r=60;t.value.offsetHeight+t.value.scrollTop+r>=t.value.scrollHeight&&c("on-scroll-end")};return(r,p)=>(n(),u("div",{ref_key:"wrapper",ref:t,class:F(["base-layout",f()]),onScroll:d},[r.$slots.header?(n(),u("header",j,[_(r.$slots,"header",{},void 0,!0)])):h("",!0),y("div",U,[_(r.$slots,"default",{},void 0,!0)]),r.$slots.footer?(n(),u("div",q,[_(r.$slots,"footer",{},void 0,!0)])):h("",!0)],34))}});const ie=g(z,[["__scopeId","data-v-678e545f"]]),G={class:"top-bar container"},J={class:"top-bar__info"},P={class:"top-bar__screen-title"},Q={key:0,class:"top-bar__title"},W=T({__name:"TopBar",props:{screenTitle:{type:String,default:""},title:{type:String,default:""},backLink:{type:[Object,String],default:null}},setup(a){return(c,i)=>{const t=I("router-link");return n(),u("div",G,[a.backLink?(n(),N(t,{key:0,class:"top-bar__back",to:a.backLink},{default:H(()=>[C(L(M),{name:"arrow-left",width:"24px",height:"24px"})]),_:1},8,["to"])):h("",!0),y("div",J,[y("h1",P,[_(c.$slots,"default",{},()=>[V(k(a.screenTitle),1)],!0)]),a.title?(n(),u("div",Q,k(a.title),1)):h("",!0)])])}}});const le=g(W,[["__scopeId","data-v-26b5c436"]]);const X={},Y={class:"main-footer"};function Z(a,c){return n(),u("div",Y,[_(a.$slots,"default",{},void 0,!0)])}const ue=g(X,[["render",Z],["__scopeId","data-v-5b3d4e2e"]]),de=O("training",()=>{const a=R("training-record",{}),c=K(),i=B(new Date),t=m(()=>{const e=p(i.value);return a.value[e]}),f=e=>i.value=e,d={reps:1,weight:1,weightUnit:"кг"},r={name:"",approaches:[{...d}]},p=e=>{const s=new Date(e);return s.setHours(0,0,0,0),s.toISOString()},b=(e=!0,s=new Date)=>{const o=s.toISOString(),l=p(s);if(a.value[l])return;const x=()=>{const S=new Date,D=new Date(s);return S.setHours(0,0,0,0),D.setHours(0,0,0,0),Number(D)<Number(S)};a.value[l]={date:o,exercises:[{...r}],isFinished:e?!1:x(),finishDate:null,isSavedToServer:!1}},w=()=>{b()},$=e=>{f(e),b(!1,e)},v=m(()=>{const e=p(new Date);return a.value[e]}),E=()=>{t.value&&t.value.exercises.push({...r})},A=m(()=>{var s;if(!t.value)return!0;const e=t.value.exercises;return e.length===0?!0:!!((s=e[e.length-1])!=null&&s.name)});return{startTraining:w,trainings:a,todayTraining:v,addExercise:E,setExerciseName:(e,s)=>{if(!t.value)return;const o=t.value.exercises[s];o.name=e},addApproach:e=>{if(!t.value)return;const s=t.value.exercises[e];s.approaches.length>0?s.approaches.push({...d,...s.approaches[s.approaches.length-1]}):s.approaches.push({...d})},setApproach:({approachIndex:e,exerciseIndex:s,approach:o})=>{if(!t.value)return;const l=t.value.exercises[s];!l||!l.approaches[e]||(l.approaches[e]=o)},canAddExercise:A,deleteApproach:({exerciseIndex:e,approachIndex:s})=>{if(!t.value)return;const o=t.value.exercises[e];o&&o.approaches.splice(e,1)},finishExercise:()=>{v.value&&(v.value.isFinished=!0,c.push({name:"home"}))},getTrainingByDate:e=>a.value[p(e)],setSelectedDate:f,startTrainingByDate:$}}),pe=a=>new Intl.DateTimeFormat("ru-RU",{dateStyle:"long"}).format(new Date(a));export{ie as B,ue as M,le as T,pe as f,de as u};
