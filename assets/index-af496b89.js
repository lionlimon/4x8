import{u as o,y as ze,r as E,z as Ne,w as A,k as L,p as te,A as Ue,c as $,B as Me,C as We,D as re,E as ie,G as le,d as S,o as g,a as C,g as V,l as x,V as U,H as ce,_ as I,j as se,v as he,t as F,h as T,e as q,b as P,I as $e,J as ge,K as Fe,L as ye,M as qe,F as ne,f as ae,s as k,T as xe,N as be,O as Ge}from"./index-812ead96.js";import{u as z,w as Y,V as J,b as Ve,a as we,d as Je,D as He,c as Ze,S as Ke,T as Qe,f as ue,E as Xe}from"./DeletionConfirmModal-ea25c62d.js";const Ce=t=>{if(t=o(t),Array.isArray(t))return!!t.length;if(t==null)return!1;if(t===!1)return!0;if(t instanceof Date)return!isNaN(t.getTime());if(typeof t=="object"){for(let a in t)return!0;return!1}return!!String(t).length};function N(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return e=>(e=o(e),!Ce(e)||a.every(n=>(n.lastIndex=0,n.test(e))))}N(/^[a-zA-Z]*$/);N(/^[a-zA-Z0-9]*$/);N(/^\d*(\.\d+)?$/);const Ye=/^(?:[A-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[A-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9]{2,}(?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i;N(Ye);function et(t){return typeof t=="string"&&(t=t.trim()),Ce(t)}var tt={$validator:et,$message:"Value is required",$params:{type:"required"}};const st=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?$/i;N(st);N(/(^[0-9]*$)|(^-[0-9]+$)/);N(/^[-]?\d*(\.\d+)?$/);function de(t,a){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);a&&(e=e.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),s.push.apply(s,e)}return s}function D(t){for(var a=1;a<arguments.length;a++){var s=arguments[a]!=null?arguments[a]:{};a%2?de(Object(s),!0).forEach(function(e){nt(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):de(Object(s)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}function nt(t,a,s){return a in t?Object.defineProperty(t,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[a]=s,t}function pe(t){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Object.keys(t).reduce((s,e)=>(a.includes(e)||(s[e]=o(t[e])),s),{})}function H(t){return typeof t=="function"}function at(t){return Me(t)||We(t)}function Ee(t,a,s){let e=t;const n=a.split(".");for(let u=0;u<n.length;u++){if(!e[n[u]])return s;e=e[n[u]]}return e}function X(t,a,s){return $(()=>t.some(e=>Ee(a,e,{[s]:!1})[s]))}function _e(t,a,s){return $(()=>t.reduce((e,n)=>{const u=Ee(a,n,{[s]:!1})[s]||[];return e.concat(u)},[]))}function Oe(t,a,s,e){return t.call(e,o(a),o(s),e)}function Re(t){return t.$valid!==void 0?!t.$valid:!t}function ot(t,a,s,e,n,u,p){let{$lazy:i,$rewardEarly:l}=n,c=arguments.length>7&&arguments[7]!==void 0?arguments[7]:[],d=arguments.length>8?arguments[8]:void 0,_=arguments.length>9?arguments[9]:void 0,y=arguments.length>10?arguments[10]:void 0;const v=E(!!e.value),r=E(0);s.value=!1;const m=A([a,e].concat(c,y),()=>{if(i&&!e.value||l&&!_.value&&!s.value)return;let f;try{f=Oe(t,a,d,p)}catch(b){f=Promise.reject(b)}r.value++,s.value=!!r.value,v.value=!1,Promise.resolve(f).then(b=>{r.value--,s.value=!!r.value,u.value=b,v.value=Re(b)}).catch(b=>{r.value--,s.value=!!r.value,u.value=b,v.value=!0})},{immediate:!0,deep:typeof a=="object"});return{$invalid:v,$unwatch:m}}function rt(t,a,s,e,n,u,p,i){let{$lazy:l,$rewardEarly:c}=e;const d=()=>({}),_=$(()=>{if(l&&!s.value||c&&!i.value)return!1;let y=!0;try{const v=Oe(t,a,p,u);n.value=v,y=Re(v)}catch(v){n.value=v}return y});return{$unwatch:d,$invalid:_}}function it(t,a,s,e,n,u,p,i,l,c,d){const _=E(!1),y=t.$params||{},v=E(null);let r,m;t.$async?{$invalid:r,$unwatch:m}=ot(t.$validator,a,_,s,e,v,n,t.$watchTargets,l,c,d):{$invalid:r,$unwatch:m}=rt(t.$validator,a,s,e,v,n,l,c);const f=t.$message;return{$message:H(f)?$(()=>f(pe({$pending:_,$invalid:r,$params:pe(y),$model:a,$response:v,$validator:u,$propertyPath:i,$property:p}))):f||"",$params:y,$pending:_,$invalid:r,$response:v,$unwatch:m}}function lt(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const a=o(t),s=Object.keys(a),e={},n={},u={};let p=null;return s.forEach(i=>{const l=a[i];switch(!0){case H(l.$validator):e[i]=l;break;case H(l):e[i]={$validator:l};break;case i==="$validationGroups":p=l;break;case i.startsWith("$"):u[i]=l;break;default:n[i]=l}}),{rules:e,nestedValidators:n,config:u,validationGroups:p}}const ct="__root";function ut(t,a,s,e,n,u,p,i,l){const c=Object.keys(t),d=e.get(n,t),_=E(!1),y=E(!1),v=E(0);if(d){if(!d.$partial)return d;d.$unwatch(),_.value=d.$dirty.value}const r={$dirty:_,$path:n,$touch:()=>{_.value||(_.value=!0)},$reset:()=>{_.value&&(_.value=!1)},$commit:()=>{}};return c.length?(c.forEach(m=>{r[m]=it(t[m],a,r.$dirty,u,p,m,s,n,l,y,v)}),r.$externalResults=$(()=>i.value?[].concat(i.value).map((m,f)=>({$propertyPath:n,$property:s,$validator:"$externalResults",$uid:`${n}-externalResult-${f}`,$message:m,$params:{},$response:null,$pending:!1})):[]),r.$invalid=$(()=>{const m=c.some(f=>o(r[f].$invalid));return y.value=m,!!r.$externalResults.value.length||m}),r.$pending=$(()=>c.some(m=>o(r[m].$pending))),r.$error=$(()=>r.$dirty.value?r.$pending.value||r.$invalid.value:!1),r.$silentErrors=$(()=>c.filter(m=>o(r[m].$invalid)).map(m=>{const f=r[m];return te({$propertyPath:n,$property:s,$validator:m,$uid:`${n}-${m}`,$message:f.$message,$params:f.$params,$response:f.$response,$pending:f.$pending})}).concat(r.$externalResults.value)),r.$errors=$(()=>r.$dirty.value?r.$silentErrors.value:[]),r.$unwatch=()=>c.forEach(m=>{r[m].$unwatch()}),r.$commit=()=>{y.value=!0,v.value=Date.now()},e.set(n,t,r),r):(d&&e.set(n,t,r),r)}function dt(t,a,s,e,n,u,p){const i=Object.keys(t);return i.length?i.reduce((l,c)=>(l[c]=ee({validations:t[c],state:a,key:c,parentKey:s,resultsCache:e,globalConfig:n,instance:u,externalResults:p}),l),{}):{}}function pt(t,a,s){const e=$(()=>[a,s].filter(r=>r).reduce((r,m)=>r.concat(Object.values(o(m))),[])),n=$({get(){return t.$dirty.value||(e.value.length?e.value.every(r=>r.$dirty):!1)},set(r){t.$dirty.value=r}}),u=$(()=>{const r=o(t.$silentErrors)||[],m=e.value.filter(f=>(o(f).$silentErrors||[]).length).reduce((f,b)=>f.concat(...b.$silentErrors),[]);return r.concat(m)}),p=$(()=>{const r=o(t.$errors)||[],m=e.value.filter(f=>(o(f).$errors||[]).length).reduce((f,b)=>f.concat(...b.$errors),[]);return r.concat(m)}),i=$(()=>e.value.some(r=>r.$invalid)||o(t.$invalid)||!1),l=$(()=>e.value.some(r=>o(r.$pending))||o(t.$pending)||!1),c=$(()=>e.value.some(r=>r.$dirty)||e.value.some(r=>r.$anyDirty)||n.value),d=$(()=>n.value?l.value||i.value:!1),_=()=>{t.$touch(),e.value.forEach(r=>{r.$touch()})},y=()=>{t.$commit(),e.value.forEach(r=>{r.$commit()})},v=()=>{t.$reset(),e.value.forEach(r=>{r.$reset()})};return e.value.length&&e.value.every(r=>r.$dirty)&&_(),{$dirty:n,$errors:p,$invalid:i,$anyDirty:c,$error:d,$pending:l,$touch:_,$reset:v,$silentErrors:u,$commit:y}}function ee(t){let{validations:a,state:s,key:e,parentKey:n,childResults:u,resultsCache:p,globalConfig:i={},instance:l,externalResults:c}=t;const d=n?`${n}.${e}`:e,{rules:_,nestedValidators:y,config:v,validationGroups:r}=lt(a),m=D(D({},i),v),f=e?$(()=>{const w=o(s);return w?o(w[e]):void 0}):s,b=D({},o(c)||{}),h=$(()=>{const w=o(c);return e?w?o(w[e]):void 0:w}),R=ut(_,f,e,p,d,m,l,h,s),O=dt(y,f,d,p,m,l,h),M={};r&&Object.entries(r).forEach(w=>{let[j,B]=w;M[j]={$invalid:X(B,O,"$invalid"),$error:X(B,O,"$error"),$pending:X(B,O,"$pending"),$errors:_e(B,O,"$errors"),$silentErrors:_e(B,O,"$silentErrors")}});const{$dirty:W,$errors:Se,$invalid:Z,$anyDirty:Ie,$error:Be,$pending:K,$touch:Q,$reset:De,$silentErrors:je,$commit:oe}=pt(R,O,u),Te=e?$({get:()=>o(f),set:w=>{W.value=!0;const j=o(s),B=o(c);B&&(B[e]=b[e]),L(j[e])?j[e].value=w:j[e]=w}}):null;e&&m.$autoDirty&&A(f,()=>{W.value||Q();const w=o(c);w&&(w[e]=b[e])},{flush:"sync"});async function Pe(){return Q(),m.$rewardEarly&&(oe(),await le()),await le(),new Promise(w=>{if(!K.value)return w(!Z.value);const j=A(K,()=>{w(!Z.value),j()})})}function Ae(w){return(u.value||{})[w]}function Le(){L(c)?c.value=b:Object.keys(b).length===0?Object.keys(c).forEach(w=>{delete c[w]}):Object.assign(c,b)}return te(D(D(D({},R),{},{$model:Te,$dirty:W,$error:Be,$errors:Se,$invalid:Z,$anyDirty:Ie,$pending:K,$touch:Q,$reset:De,$path:d||ct,$silentErrors:je,$validate:Pe,$commit:oe},u&&{$getResultsForChild:Ae,$clearExternalResults:Le,$validationGroups:M}),O))}class _t{constructor(){this.storage=new Map}set(a,s,e){this.storage.set(a,{rules:s,result:e})}checkRulesValidity(a,s,e){const n=Object.keys(e),u=Object.keys(s);return u.length!==n.length||!u.every(i=>n.includes(i))?!1:u.every(i=>s[i].$params?Object.keys(s[i].$params).every(l=>o(e[i].$params[l])===o(s[i].$params[l])):!0)}get(a,s){const e=this.storage.get(a);if(!e)return;const{rules:n,result:u}=e,p=this.checkRulesValidity(a,s,n),i=u.$unwatch?u.$unwatch:()=>({});return p?u:{$dirty:u.$dirty,$partial:!0,$unwatch:i}}}const G={COLLECT_ALL:!0,COLLECT_NONE:!1},fe=Symbol("vuelidate#injectChildResults"),me=Symbol("vuelidate#removeChildResults");function ft(t){let{$scope:a,instance:s}=t;const e={},n=E([]),u=$(()=>n.value.reduce((d,_)=>(d[_]=o(e[_]),d),{}));function p(d,_){let{$registerAs:y,$scope:v,$stopPropagation:r}=_;r||a===G.COLLECT_NONE||v===G.COLLECT_NONE||a!==G.COLLECT_ALL&&a!==v||(e[y]=d,n.value.push(y))}s.__vuelidateInjectInstances=[].concat(s.__vuelidateInjectInstances||[],p);function i(d){n.value=n.value.filter(_=>_!==d),delete e[d]}s.__vuelidateRemoveInstances=[].concat(s.__vuelidateRemoveInstances||[],i);const l=re(fe,[]);ie(fe,s.__vuelidateInjectInstances);const c=re(me,[]);return ie(me,s.__vuelidateRemoveInstances),{childResults:u,sendValidationResultsToParent:l,removeValidationResultsFromParent:c}}function ke(t){return new Proxy(t,{get(a,s){return typeof a[s]=="object"?ke(a[s]):$(()=>a[s])}})}let ve=0;function mt(t,a){var s;let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};arguments.length===1&&(e=t,t=void 0,a=void 0);let{$registerAs:n,$scope:u=G.COLLECT_ALL,$stopPropagation:p,$externalResults:i,currentVueInstance:l}=e;const c=l||((s=ze())===null||s===void 0?void 0:s.proxy),d=c?c.$options:{};n||(ve+=1,n=`_vuelidate_${ve}`);const _=E({}),y=new _t,{childResults:v,sendValidationResultsToParent:r,removeValidationResultsFromParent:m}=c?ft({$scope:u,instance:c}):{childResults:E({})};if(!t&&d.validations){const f=d.validations;a=E({}),Ne(()=>{a.value=c,A(()=>H(f)?f.call(a.value,new ke(a.value)):f,b=>{_.value=ee({validations:b,state:a,childResults:v,resultsCache:y,globalConfig:e,instance:c,externalResults:i||c.vuelidateExternalResults})},{immediate:!0})}),e=d.validationsConfig||e}else{const f=L(t)||at(t)?t:te(t||{});A(f,b=>{_.value=ee({validations:b,state:a,childResults:v,resultsCache:y,globalConfig:e,instance:c??{},externalResults:i})},{immediate:!0})}return c&&(r.forEach(f=>f(_,{$registerAs:n,$scope:u,$stopPropagation:p})),Ue(()=>m.forEach(f=>f(n)))),$(()=>D(D({},o(_.value)),v.value))}const vt=(t,a)=>{const s=String(a).split(".");let e=t;for(const n of s)if(e&&typeof e=="object"&&n in e)e=e[n];else return;return e},ht=(t,a)=>{const s=Object.keys(a),e=E({}),n=()=>{s.forEach(c=>e.value[c]=[])};n();const u=c=>e.value=c,p=mt(t,a,{$externalResults:e}),i=$(()=>c=>{var _,y,v;const d=(v=(y=(_=p.value[c])==null?void 0:_.$errors)==null?void 0:y[0])==null?void 0:v.$message;return(L(d)?d.value:d)??""});return{serverErrors:e,getError:i,validation:p,setInitialServerErrors:n,syncServerErrors:u,touch:c=>{var d,_;(_=(d=vt(p.value,c))==null?void 0:d.$touch)==null||_.call(d)}}},$t=t=>{const a=JSON.stringify(t);return JSON.parse(a)},gt={class:"counter"},yt=["onClick","disabled"],xt=["value"],bt=["onClick","disabled"],Vt=S({__name:"VCounter",props:{modelValue:{},disabled:{type:Boolean,default:!1},min:{default:0},max:{default:null}},emits:["update:modelValue"],setup(t,{emit:a}){const s=a,e=t,n=z(e,"modelValue",s),u=()=>{e.max?Number(n.value)<e.max&&(n.value=Number(n.value)+1):n.value=Number(n.value)+1},p=()=>{Number(n.value)>e.min&&(n.value=Number(n.value)-1)};return(i,l)=>(g(),C("div",gt,[V("button",{type:"button",class:"counter__decrement",onClick:ce(p,["stop"]),disabled:i.disabled},[x(o(U),{width:"14",height:"14",name:"minus"})],8,yt),V("label",null,[V("input",{inputmode:"numeric",type:"number",onChange:l[0]||(l[0]=c=>{var d;return n.value=((d=c.target)==null?void 0:d.value)??""}),value:o(n),class:"counter__value"},null,40,xt)]),V("button",{type:"button",class:"counter__increment",onClick:ce(u,["stop"]),disabled:i.disabled},[x(o(U),{width:"14",height:"14",name:"plus"})],8,bt)]))}});const wt=I(Vt,[["__scopeId","data-v-b51c0b54"]]),Ct=S({__name:"VMiniInput",props:{modelValue:{}},emits:["update:modelValue"],setup(t,{emit:a}){const n=z(t,"modelValue",a);return(u,p)=>se((g(),C("input",{class:"mini-input","onUpdate:modelValue":p[0]||(p[0]=i=>L(n)?n.value=i:null)},null,512)),[[he,o(n)]])}});const Et=I(Ct,[["__scopeId","data-v-23743f29"]]),Ot=t=>($e("data-v-2142f5b2"),t=t(),ge(),t),Rt={class:"exercise-approach"},kt={class:"exercise-approach__head"},St={class:"exercise-approach__count"},It={class:"exercise-approach__actions"},Bt={class:"exercise-approach__actions-group"},Dt=Ot(()=>V("div",{class:"exercise-approach__actions-title"},"Повторения",-1)),jt={class:"exercise-approach__actions-group"},Tt={class:"exercise-approach__actions-title"},Pt={class:"exercise-approach__weight-input"},At=S({__name:"ExerciseApproach",props:{approach:{},index:{},isBasedOnBodyWeight:{type:Boolean}},emits:["delete-click","update:approach"],setup(t,{emit:a}){const s=a,e=t,n=z(e,"approach",s),u=$(()=>{const p=Y[e.approach.weightUnit];return`${e.isBasedOnBodyWeight?"Доп. вес":"Вес"} (${p})`});return(p,i)=>(g(),C("div",Rt,[V("div",kt,[V("div",St,F(p.index+1)+" подход ",1),V("button",{type:"button",class:"exercise-approach__delete",onClick:i[0]||(i[0]=l=>s("delete-click",p.approach.id))},[x(o(U),{name:"trash",width:"18",height:"18"})])]),V("div",It,[V("div",Bt,[Dt,x(o(wt),{modelValue:o(n).reps,"onUpdate:modelValue":i[1]||(i[1]=l=>o(n).reps=l)},null,8,["modelValue"])]),V("div",jt,[V("div",Tt,F(u.value),1),V("div",Pt,[p.isBasedOnBodyWeight?(g(),T(o(U),{key:0,class:"exercise-approach__weight-input-icon",name:"body",width:"25",height:"24"})):q("",!0),P(" "+F(p.isBasedOnBodyWeight?"+":null)+" ",1),x(o(Et),{inputmode:"numeric",type:"number",modelValue:o(n).weight,"onUpdate:modelValue":i[2]||(i[2]=l=>o(n).weight=l)},null,8,["modelValue"])])])])]))}});const Lt=I(At,[["__scopeId","data-v-2142f5b2"]]),zt=t=>($e("data-v-9b071666"),t=t(),ge(),t),Nt={class:"switch"},Ut={class:"switch__inner"},Mt=["checked"],Wt=zt(()=>V("span",{class:"switch__slider"},null,-1)),Ft={key:0,class:"switch__label"},qt=S({__name:"VSwitch",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(t,{emit:a}){const s=a,e=n=>{s("update:modelValue",n.target.checked)};return(n,u)=>(g(),C("label",Nt,[V("span",Ut,[V("input",Fe({class:"switch__input"},n.$attrs,{checked:n.modelValue,type:"checkbox",onChange:e}),null,16,Mt),Wt]),n.$slots.default?(g(),C("span",Ft,[ye(n.$slots,"default",{},void 0,!0)])):q("",!0)]))}});const Gt=I(qt,[["__scopeId","data-v-9b071666"]]),Jt={class:"select"},Ht={class:"select__inner"},Zt=["value"],Kt={key:0,class:"select__label"},Qt=S({__name:"VSelect",props:{options:{},modelValue:{}},emits:["update:modelValue"],setup(t,{emit:a}){const s=a,e=t,n=z(e,"modelValue",s);return(u,p)=>(g(),C("label",Jt,[V("span",Ht,[se(V("select",{class:"select__input","onUpdate:modelValue":p[0]||(p[0]=i=>L(n)?n.value=i:null)},[(g(!0),C(ne,null,ae(e.options,i=>(g(),C("option",{key:i.value,value:i.value},F(i.title),9,Zt))),128))],512),[[qe,o(n)]])]),u.$slots.default?(g(),C("span",Kt,[ye(u.$slots,"default",{},void 0,!0)])):q("",!0)]))}});const Xt=I(Qt,[["__scopeId","data-v-3565c724"]]),Yt={class:"exercise-top-bar"},es={class:"exercise-top-bar__actions"},ts={key:0,class:"exercise-top-bar__settings"},ss=S({__name:"ExerciseTopBar",props:{modelValue:{},hideDeletion:{type:Boolean}},emits:["update:modelValue","delete-exercise-click"],setup(t,{emit:a}){const s=E(!1),e=t,n=a,u=z(e,"modelValue",n),p=Object.keys(Y).map(l=>({title:Y[l],value:l})),i=$(()=>s.value?"Закрыть":"Параметры");return(l,c)=>(g(),C("div",Yt,[V("div",es,[x(o(J),{variant:"outline",onClick:c[0]||(c[0]=d=>s.value=!s.value)},{default:k(()=>[x(o(U),{name:"settings"}),P(" "+F(i.value),1)]),_:1}),l.hideDeletion?(g(),T(o(Ve),{key:0,theme:"dangerous",icon:"trash",onClick:c[1]||(c[1]=d=>n("delete-exercise-click"))})):q("",!0)]),x(xe,{name:"fade",mode:"out-in"},{default:k(()=>[s.value?(g(),C("div",ts,[x(o(Gt),{modelValue:o(u).bodyWeight,"onUpdate:modelValue":c[2]||(c[2]=d=>o(u).bodyWeight=d)},{default:k(()=>[P("Собственный вес")]),_:1},8,["modelValue"]),x(o(Xt),{modelValue:o(u).weightUnit,"onUpdate:modelValue":c[3]||(c[3]=d=>o(u).weightUnit=d),options:o(p)},{default:k(()=>[P("Ед. Измерения")]),_:1},8,["modelValue","options"])])):q("",!0)]),_:1})]))}});const ns=I(ss,[["__scopeId","data-v-3d6f6688"]]),as={key:0,class:"approaches-list"},os={key:1,class:"empty-message"},rs=S({__name:"ApproachesList",props:{modelValue:{},isBasedOnBodyWeight:{type:Boolean}},emits:["update:modelValue","delete-click"],setup(t,{emit:a}){const s=a,n=z(t,"modelValue",s);return(u,p)=>(g(),T(xe,{mode:"out-in",name:"fade"},{default:k(()=>[o(n).length?(g(),C("ul",as,[x(be,{name:"fade"},{default:k(()=>[(g(!0),C(ne,null,ae(o(n),(i,l)=>(g(),C("li",{class:"approaches-list__approach",key:i.id},[x(o(Lt),{"is-based-on-body-weight":u.isBasedOnBodyWeight,index:l,approach:o(n)[l],"onUpdate:approach":c=>o(n)[l]=c,onDeleteClick:c=>s("delete-click",i.id)},null,8,["is-based-on-body-weight","index","approach","onUpdate:approach","onDeleteClick"])]))),128))]),_:1})])):(g(),C("p",os,"Подходы пока не добавлены"))]),_:1}))}});const is=I(rs,[["__scopeId","data-v-22d9e1ab"]]),ls={class:"name-input"},cs=S({__name:"NameInput",props:{modelValue:{}},emits:["update:modelValue"],setup(t,{emit:a}){const n=z(t,"modelValue",a);return(u,p)=>(g(),C("label",ls,[se(V("input",{"onUpdate:modelValue":p[0]||(p[0]=i=>L(n)?n.value=i:null),type:"text",placeholder:"Введите название",class:"name-input__input"},null,512),[[he,o(n)]])]))}});const us=I(cs,[["__scopeId","data-v-fae79cea"]]),ds={class:"action-buttons"},ps=S({__name:"ActionButtons",props:{disabled:{type:Boolean}},emits:["add-approach-click","save-click"],setup(t,{emit:a}){const s=a;return(e,n)=>(g(),C("div",ds,[x(o(J),{class:"action-buttons__add-button",size:"m",variant:"outline",wide:"",onClick:n[0]||(n[0]=u=>s("add-approach-click"))},{default:k(()=>[x(o(U),{name:"plus"}),P(" Добавить подход ")]),_:1}),x(o(J),{disabled:e.disabled,size:"m",wide:"",onClick:n[1]||(n[1]=u=>s("save-click"))},{default:k(()=>[P(" Сохранить ")]),_:1},8,["disabled"])]))}});const _s=I(ps,[["__scopeId","data-v-0e9f1c3d"]]),fs={class:"exercise-detail-modal__container container"},ms=S({__name:"ExerciseDetailModal",setup(t,{expose:a}){const s=we(),e=Je(),n=E(null),u=E(),p=E(),i=()=>({name:"",approaches:[],id:new Date().toISOString(),isBasedOnBodyWeight:!1}),l=E(i()),c={name:{required:tt}},{validation:d}=ht(c,l),_=E({bodyWeight:!1,weightUnit:e.settings.weightUnit}),y=()=>{const h=l.value.approaches[l.value.approaches.length-1]??{weightUnit:_.value.weightUnit,weight:0,reps:0,id:new Date().toISOString()};l.value.approaches.push({...h})},v=h=>{const R=l.value.approaches.findIndex(O=>O.id===h);l.value.approaches.splice(R,1)},r=()=>{n.value=null,l.value=i()},m=async()=>{var h;await d.value.$validate()&&(n.value?s.editExercise(n.value.date,l.value):s.addExercise(l.value),(h=u.value)==null||h.close())},f=()=>{var h;(h=p.value)==null||h.open()},b=()=>{var h;n.value&&(s.deleteExercise(n.value.date,n.value.exerciseId),(h=u.value)==null||h.close())};return A(()=>_.value.weightUnit,h=>{l.value.approaches.forEach(R=>{R.weightUnit=h})}),A(()=>_.value.bodyWeight,h=>{l.value.isBasedOnBodyWeight=h}),a({open:h=>{var M;if((M=u.value)==null||M.open(),!h)return;const R=s.getTrainingByDate(h.date);if(!R)return;const O=R.exercises.find(W=>W.id===(h==null?void 0:h.exerciseId));O&&(l.value=$t(O),n.value={exerciseId:h.exerciseId,date:h.date})},close:()=>{var h;return(h=u.value)==null?void 0:h.close()}}),(h,R)=>(g(),T(o(Ze),{"full-height":"",ref_key:"bottomSheet",ref:u,class:"exercise-detail-modal",onOnClose:r},{default:k(()=>[V("div",fs,[x(o(us),{modelValue:l.value.name,"onUpdate:modelValue":R[0]||(R[0]=O=>l.value.name=O)},null,8,["modelValue"]),x(o(ns),{modelValue:_.value,"onUpdate:modelValue":R[1]||(R[1]=O=>_.value=O),class:"exercise-detail-modal__top-bar","hide-deletion":!!n.value,onDeleteExerciseClick:f},null,8,["modelValue","hide-deletion"]),x(o(is),{modelValue:l.value.approaches,"onUpdate:modelValue":R[2]||(R[2]=O=>l.value.approaches=O),"is-based-on-body-weight":l.value.isBasedOnBodyWeight,onDeleteClick:v},null,8,["modelValue","is-based-on-body-weight"]),x(o(_s),{onAddApproachClick:y,onSaveClick:m,disabled:o(d).$invalid},null,8,["disabled"])]),x(o(He),{ref_key:"deletionConfirmModal",ref:p,text:"Удалить упражнение?",onConfirm:b},null,512)]),_:1},512))}});const vs=I(ms,[["__scopeId","data-v-22fcd85d"]]),hs={key:0,class:"training__exercises"},$s={key:1,class:"training__empty"},gs={class:"container"},ys=S({__name:"training",setup(t){const a=Ge(),s=we(),e=E();s.setSelectedDate(a.query.date?new Date(a.query.date):new Date);const n=$(()=>a.query.date?ue(new Date(a.query.date)):ue(new Date));a.query.date&&s.startTrainingByDate(new Date(a.query.date));const u=()=>{var i;s.startTraining(),(i=e.value)==null||i.open()},p=i=>{var c,d;const l=(c=s.selectedDayTraining)==null?void 0:c.date;l&&((d=e.value)==null||d.open({exerciseId:i,date:new Date(l)}))};return(i,l)=>(g(),T(o(Ke),{class:"training"},{header:k(()=>[x(o(Qe),{title:n.value,"screen-title":"Тренировка"},null,8,["title"])]),footer:k(()=>[V("div",gs,[o(s).selectedDayTraining?(g(),T(o(Ve),{key:0,class:"training__add",size:"m",icon:"plus",onClick:l[0]||(l[0]=c=>{var d;return(d=e.value)==null?void 0:d.open()})})):(g(),T(o(J),{key:1,size:"m",wide:"",onClick:u},{default:k(()=>[P(" Начать тренировку ")]),_:1}))])]),default:k(()=>{var c;return[(c=o(s).selectedDayTraining)!=null&&c.exercises.length?(g(),C("ul",hs,[x(be,{name:"fade"},{default:k(()=>[(g(!0),C(ne,null,ae(o(s).selectedDayTraining.exercises,(d,_)=>(g(),C("li",{class:"training__exercise",key:_},[x(o(Xe),{"can-edit":"",exercise:d,onEditClick:()=>p(d.id)},null,8,["exercise","onEditClick"])]))),128))]),_:1})])):(g(),C("p",$s,"Добавте упражнения")),x(o(vs),{ref_key:"exerciseModal",ref:e},null,512)]}),_:1}))}});const Vs=I(ys,[["__scopeId","data-v-98be0c82"]]);export{Vs as Training};
