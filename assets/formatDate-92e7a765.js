import{a as $,j as E,o as c,b as d,B as p,x as h,e as y,n as L,C as V,q as K,l as M,h as R,u as j,f as U,g as I,d as q,s as z,m as g}from"./index-58dd6152.js";import{_ as m,V as G,b as J}from"./VButton-d0f617e5.js";const P={key:0,class:"base-layout__header"},Q={class:"base-layout__content container"},W={key:1,class:"base-layout__footer"},X=$({__name:"BaseLayout",props:{staticHeader:{type:Boolean},noScroll:{type:Boolean}},emits:["on-scroll-end"],setup(a,{emit:i}){const l=a,s=E(null),f=()=>({"base-layout--static-header":l.staticHeader,"base-layout--no-scroll":l.noScroll}),_=()=>{if(!s.value)return;const n=60;s.value.offsetHeight+s.value.scrollTop+n>=s.value.scrollHeight&&i("on-scroll-end")};return(n,u)=>(c(),d("div",{ref_key:"wrapper",ref:s,class:L(["base-layout",f()]),onScroll:_},[n.$slots.header?(c(),d("header",P,[p(n.$slots,"header",{},void 0,!0)])):h("",!0),y("div",Q,[p(n.$slots,"default",{},void 0,!0)]),n.$slots.footer?(c(),d("div",W,[p(n.$slots,"footer",{},void 0,!0)])):h("",!0)],34))}});const le=m(X,[["__scopeId","data-v-678e545f"]]),Y={class:"top-bar container"},Z={class:"top-bar__info"},ee={class:"top-bar__screen-title"},te={key:0,class:"top-bar__title"},se=$({__name:"TopBar",props:{screenTitle:{type:String,default:""},title:{type:String,default:""},backLink:{type:[Object,String],default:null}},setup(a){return(i,l)=>{const s=V("router-link");return c(),d("div",Y,[a.backLink?(c(),K(s,{key:0,class:"top-bar__back",to:a.backLink},{default:M(()=>[R(j(G),{name:"arrow-left",width:"24px",height:"24px"})]),_:1},8,["to"])):h("",!0),y("div",Z,[y("h1",ee,[p(i.$slots,"default",{},()=>[U(I(a.screenTitle),1)],!0)]),a.title?(c(),d("div",te,I(a.title),1)):h("",!0)])])}}});const ue=m(se,[["__scopeId","data-v-26b5c436"]]);const ae={},re={class:"main-footer"};function ne(a,i){return c(),d("div",re,[p(a.$slots,"default",{},void 0,!0)])}const de=m(ae,[["render",ne],["__scopeId","data-v-5b3d4e2e"]]),_e=q("training",()=>{const a=J("training-record",{}),i=z(),l=E(new Date),s=g(()=>{const e=u(l.value);return a.value[e]}),f=e=>l.value=e,_={reps:1,weight:1,weightUnit:"кг",id:new Date().toISOString()},n={name:"",approaches:[{..._,id:new Date().toISOString()}]},u=e=>{const t=new Date(e);return t.setHours(0,0,0,0),t.toISOString()},b=(e=!0,t=new Date)=>{const r=t.toISOString(),o=u(t);if(a.value[o])return;const T=()=>{const k=new Date,B=new Date(t);return k.setHours(0,0,0,0),B.setHours(0,0,0,0),Number(B)<Number(k)};a.value[o]={date:r,exercises:[{...n}],isFinished:e?!1:T(),finishDate:null,isSavedToServer:!1}},S=()=>{b()},F=e=>{f(e),b(!1,e)},v=g(()=>{const e=u(new Date);return a.value[e]}),x=()=>{s.value&&s.value.exercises.push({...n})},H=g(()=>{var t;if(!s.value)return!0;const e=s.value.exercises;return e.length===0?!0:!!((t=e[e.length-1])!=null&&t.name)}),D=(e,t)=>{if(!s.value)return;const r=s.value.exercises[t];r.name=e},N=e=>{if(!s.value)return;const t=s.value.exercises[e],r=new Date().toISOString();t.approaches.length>0?t.approaches.push({..._,...t.approaches[t.approaches.length-1],id:r}):t.approaches.push({..._,id:r})},O=({approachIndex:e,exerciseIndex:t,approach:r})=>{if(!s.value)return;const o=s.value.exercises[t];!o||!o.approaches[e]||(o.approaches[e]=r)},A=({exerciseIndex:e,approachIndex:t})=>{if(!s.value)return;const r=s.value.exercises[e];r&&r.approaches.splice(t,1)},C=()=>{v.value&&(v.value.isFinished=!0,i.push({name:"home"}))},w=e=>a.value[u(e)];return{startTraining:S,trainings:a,todayTraining:v,addExercise:x,setExerciseName:D,addApproach:N,setApproach:O,canAddExercise:H,deleteApproach:A,finishExercise:C,getTrainingByDate:w,setSelectedDate:f,startTrainingByDate:F,copyTraining:e=>{const t=w(e);t&&(a.value[u(new Date)]=void 0,S(),t.exercises.forEach(({name:r},o)=>{o!==0&&x(),D(r,o)}))}}}),pe=a=>new Intl.DateTimeFormat("ru-RU",{dateStyle:"long"}).format(new Date(a));export{le as B,de as M,ue as T,pe as f,_e as u};
