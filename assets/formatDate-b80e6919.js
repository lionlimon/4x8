import{a as k,j as T,o,b as u,B as p,s as h,e as m,n as A,C as F,q as N,l as H,h as O,u as C,f as L,g as w,d as V,A as K,m as g}from"./index-8aa21149.js";import{_ as y,V as M,b as R}from"./VButton-49741e3a.js";const j={key:0,class:"base-layout__header"},U={class:"base-layout__content container"},q={key:1,class:"base-layout__footer"},z=k({__name:"BaseLayout",props:{staticHeader:{type:Boolean},noScroll:{type:Boolean}},emits:["on-scroll-end"],setup(a,{emit:c}){const i=a,s=T(null),f=()=>({"base-layout--static-header":i.staticHeader,"base-layout--no-scroll":i.noScroll}),d=()=>{if(!s.value)return;const n=60;s.value.offsetHeight+s.value.scrollTop+n>=s.value.scrollHeight&&c("on-scroll-end")};return(n,_)=>(o(),u("div",{ref_key:"wrapper",ref:s,class:A(["base-layout",f()]),onScroll:d},[n.$slots.header?(o(),u("header",j,[p(n.$slots,"header",{},void 0,!0)])):h("",!0),m("div",U,[p(n.$slots,"default",{},void 0,!0)]),n.$slots.footer?(o(),u("div",q,[p(n.$slots,"footer",{},void 0,!0)])):h("",!0)],34))}});const ie=y(z,[["__scopeId","data-v-678e545f"]]),G={class:"top-bar container"},J={class:"top-bar__info"},P={class:"top-bar__screen-title"},Q={key:0,class:"top-bar__title"},W=k({__name:"TopBar",props:{screenTitle:{type:String,default:""},title:{type:String,default:""},backLink:{type:[Object,String],default:null}},setup(a){return(c,i)=>{const s=F("router-link");return o(),u("div",G,[a.backLink?(o(),N(s,{key:0,class:"top-bar__back",to:a.backLink},{default:H(()=>[O(C(M),{name:"arrow-left",width:"24px",height:"24px"})]),_:1},8,["to"])):h("",!0),m("div",J,[m("h1",P,[p(c.$slots,"default",{},()=>[L(w(a.screenTitle),1)],!0)]),a.title?(o(),u("div",Q,w(a.title),1)):h("",!0)])])}}});const le=y(W,[["__scopeId","data-v-26b5c436"]]);const X={},Y={class:"main-footer"};function Z(a,c){return o(),u("div",Y,[p(a.$slots,"default",{},void 0,!0)])}const ue=y(X,[["render",Z],["__scopeId","data-v-5b3d4e2e"]]),de=V("training",()=>{const a=R("training-record",{}),c=K(),i=T(new Date),s=g(()=>{const e=_(i.value);return a.value[e]}),f=e=>i.value=e,d={reps:1,weight:1,weightUnit:"кг",id:new Date().toISOString()},n={name:"",approaches:[{...d,id:new Date().toISOString()}]},_=e=>{const t=new Date(e);return t.setHours(0,0,0,0),t.toISOString()},b=(e=!0,t=new Date)=>{const r=t.toISOString(),l=_(t);if(a.value[l])return;const S=()=>{const x=new Date,D=new Date(t);return x.setHours(0,0,0,0),D.setHours(0,0,0,0),Number(D)<Number(x)};a.value[l]={date:r,exercises:[{...n}],isFinished:e?!1:S(),finishDate:null,isSavedToServer:!1}},B=()=>{b()},I=e=>{f(e),b(!1,e)},v=g(()=>{const e=_(new Date);return a.value[e]}),$=()=>{s.value&&s.value.exercises.push({...n})},E=g(()=>{var t;if(!s.value)return!0;const e=s.value.exercises;return e.length===0?!0:!!((t=e[e.length-1])!=null&&t.name)});return{startTraining:B,trainings:a,todayTraining:v,addExercise:$,setExerciseName:(e,t)=>{if(!s.value)return;const r=s.value.exercises[t];r.name=e},addApproach:e=>{if(!s.value)return;const t=s.value.exercises[e],r=new Date().toISOString();t.approaches.length>0?t.approaches.push({...d,...t.approaches[t.approaches.length-1],id:r}):t.approaches.push({...d,id:r})},setApproach:({approachIndex:e,exerciseIndex:t,approach:r})=>{if(!s.value)return;const l=s.value.exercises[t];!l||!l.approaches[e]||(l.approaches[e]=r)},canAddExercise:E,deleteApproach:({exerciseIndex:e,approachIndex:t})=>{if(!s.value)return;const r=s.value.exercises[e];r&&r.approaches.splice(t,1)},finishExercise:()=>{v.value&&(v.value.isFinished=!0,c.push({name:"home"}))},getTrainingByDate:e=>a.value[_(e)],setSelectedDate:f,startTrainingByDate:I}}),_e=a=>new Intl.DateTimeFormat("ru-RU",{dateStyle:"long"}).format(new Date(a));export{ie as B,ue as M,le as T,_e as f,de as u};
