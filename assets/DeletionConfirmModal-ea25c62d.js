import{P as ue,Q as de,u as D,R as fe,S as q,U as _e,r as V,w as z,y as pe,c as R,G as ee,W as he,d as M,A as me,o as f,h as N,s as W,g as k,a as w,t as $,e as T,L as C,n as te,X as ve,_ as A,Y as ge,l as P,V as H,b as j,m as ne,Z as ye,F as we,f as be}from"./index-812ead96.js";function se(e){return ue()?(de(e),!0):!1}function L(e){return typeof e=="function"?e():D(e)}const oe=typeof window<"u"&&typeof document<"u",Se=e=>typeof e<"u",xe=Object.prototype.toString,$e=e=>xe.call(e)==="[object Object]",re=()=>{},G=De();function De(){var e;return oe&&((e=window==null?void 0:window.navigator)==null?void 0:e.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent)}function Oe(e,t){function n(...s){return new Promise((o,l)=>{Promise.resolve(e(()=>t.apply(this,s),{fn:t,thisArg:this,args:s})).then(o).catch(l)})}return n}const ae=e=>e();function ke(e=ae){const t=V(!0);function n(){t.value=!1}function s(){t.value=!0}const o=(...l)=>{t.value&&e(...l)};return{isActive:q(t),pause:n,resume:s,eventFilter:o}}function Te(...e){if(e.length!==1)return fe(...e);const t=e[0];return typeof t=="function"?q(_e(()=>({get:t,set:re}))):V(t)}function Ee(e,t,n={}){const{eventFilter:s=ae,...o}=n;return z(e,Oe(s,t),o)}function Ve(e,t,n={}){const{eventFilter:s,...o}=n,{eventFilter:l,pause:i,resume:u,isActive:g}=ke(s);return{stop:Ee(e,t,{...o,eventFilter:l}),pause:i,resume:u,isActive:g}}function Ae(e){var t;const n=L(e);return(t=n==null?void 0:n.$el)!=null?t:n}const Y=oe?window:void 0;function X(...e){let t,n,s,o;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,s,o]=e,t=Y):[t,n,s,o]=e,!t)return re;Array.isArray(n)||(n=[n]),Array.isArray(s)||(s=[s]);const l=[],i=()=>{l.forEach(h=>h()),l.length=0},u=(h,p,x,_)=>(h.addEventListener(p,x,_),()=>h.removeEventListener(p,x,_)),g=z(()=>[Ae(t),L(o)],([h,p])=>{if(i(),!h)return;const x=$e(p)?{...p}:p;l.push(...n.flatMap(_=>s.map(v=>u(h,_,v,x))))},{immediate:!0,flush:"post"}),m=()=>{g(),i()};return se(m),m}function Ie(e){return JSON.parse(JSON.stringify(e))}const U=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},J="__vueuse_ssr_handlers__",Be=Ce();function Ce(){return J in U||(U[J]=U[J]||{}),U[J]}function Ne(e,t){return Be[e]||t}function Fe(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const Le={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},Q="vueuse-storage";function ie(e,t,n,s={}){var o;const{flush:l="pre",deep:i=!0,listenToStorageChanges:u=!0,writeDefaults:g=!0,mergeDefaults:m=!1,shallow:h,window:p=Y,eventFilter:x,onError:_=a=>{console.error(a)}}=s,v=(h?he:V)(t);if(!n)try{n=Ne("getDefaultStorage",()=>{var a;return(a=Y)==null?void 0:a.localStorage})()}catch(a){_(a)}if(!n)return v;const b=L(t),E=Fe(b),O=(o=s.serializer)!=null?o:Le[E],{pause:F,resume:y}=Ve(v,()=>I(v.value),{flush:l,deep:i,eventFilter:x});return p&&u&&(X(p,"storage",d),X(p,Q,c)),d(),v;function I(a){try{if(a==null)n.removeItem(e);else{const S=O.write(a),B=n.getItem(e);B!==S&&(n.setItem(e,S),p&&p.dispatchEvent(new CustomEvent(Q,{detail:{key:e,oldValue:B,newValue:S,storageArea:n}})))}}catch(S){_(S)}}function r(a){const S=a?a.newValue:n.getItem(e);if(S==null)return g&&b!==null&&n.setItem(e,O.write(b)),b;if(!a&&m){const B=O.read(S);return typeof m=="function"?m(B,b):E==="object"&&!Array.isArray(B)?{...b,...B}:B}else return typeof S!="string"?S:O.read(S)}function c(a){d(a.detail)}function d(a){if(!(a&&a.storageArea!==n)){if(a&&a.key==null){v.value=b;return}if(!(a&&a.key!==e)){F();try{(a==null?void 0:a.newValue)!==O.write(v.value)&&(v.value=r(a))}catch(S){_(S)}finally{a?ee(y):y()}}}}}function K(e){return typeof Window<"u"&&e instanceof Window?e.document.documentElement:typeof Document<"u"&&e instanceof Document?e.documentElement:e}function ce(e){const t=window.getComputedStyle(e);if(t.overflowX==="scroll"||t.overflowY==="scroll"||t.overflowX==="auto"&&e.clientWidth<e.scrollWidth||t.overflowY==="auto"&&e.clientHeight<e.scrollHeight)return!0;{const n=e.parentNode;return!n||n.tagName==="BODY"?!1:ce(n)}}function ze(e){const t=e||window.event,n=t.target;return ce(n)?!1:t.touches.length>1?!0:(t.preventDefault&&t.preventDefault(),!1)}function We(e,t=!1){const n=V(t);let s=null,o;z(Te(e),u=>{const g=K(L(u));if(g){const m=g;o=m.style.overflow,n.value&&(m.style.overflow="hidden")}},{immediate:!0});const l=()=>{const u=K(L(e));!u||n.value||(G&&(s=X(u,"touchmove",g=>{ze(g)},{passive:!1})),u.style.overflow="hidden",n.value=!0)},i=()=>{const u=K(L(e));!u||!n.value||(G&&(s==null||s()),u.style.overflow=o,n.value=!1)};return se(i),R({get(){return n.value},set(u){u?l():i()}})}function St(e,t,n,s={}){var o,l,i;const{clone:u=!1,passive:g=!1,eventName:m,deep:h=!1,defaultValue:p,shouldEmit:x}=s,_=pe(),v=n||(_==null?void 0:_.emit)||((o=_==null?void 0:_.$emit)==null?void 0:o.bind(_))||((i=(l=_==null?void 0:_.proxy)==null?void 0:l.$emit)==null?void 0:i.bind(_==null?void 0:_.proxy));let b=m;t||(t="modelValue"),b=b||`update:${t.toString()}`;const E=y=>u?typeof u=="function"?u(y):Ie(y):y,O=()=>Se(e[t])?E(e[t]):p,F=y=>{x?x(y)&&v(b,y):v(b,y)};if(g){const y=O(),I=V(y);let r=!1;return z(()=>e[t],c=>{r||(r=!0,I.value=E(c),ee(()=>r=!1))}),z(I,c=>{!r&&(c!==e[t]||h)&&F(c)},{deep:h}),I}else return R({get(){return O()},set(y){F(y)}})}const Me={class:"modal__header"},je={class:"modal__header-info"},Re={key:0,class:"modal__title"},Ue={key:1,class:"modal__sub-title"},Je={key:0,class:"modal__actions"},He={class:"modal__inner"},Pe=M({__name:"VModal",props:{title:{type:String,default:null},subTitle:{type:String,default:null},fullHeight:{type:Boolean,default:!1}},emits:["on-open","on-close"],setup(e,{expose:t,emit:n}){const s=n,o=e,l=We(document.body),i=V(!1);z(i,()=>{l.value=i.value});const u=()=>{i.value=!1,s("on-close")},g=R(()=>({"modal--full-height":o.fullHeight}));return me(()=>u()),t({open(){i.value=!0,s("on-open")},close:u}),(m,h)=>(f(),N(D(ve),{class:te(["modal",g.value]),"no-stretch":"","only-header-swipe":"",visible:i.value,"onUpdate:visible":h[0]||(h[0]=p=>i.value=p),onClose:h[1]||(h[1]=p=>s("on-close"))},{default:W(()=>[k("div",Me,[k("div",je,[e.title?(f(),w("h4",Re,$(e.title),1)):T("",!0),e.subTitle?(f(),w("p",Ue,$(e.subTitle),1)):T("",!0)]),m.$slots.actions?(f(),w("div",Je,[C(m.$slots,"actions",{},void 0,!0)])):T("",!0)]),k("div",He,[C(m.$slots,"default",{},void 0,!0)])]),_:3},8,["class","visible"]))}});const Ke=A(Pe,[["__scopeId","data-v-e77188ab"]]),Ye={class:"top-bar container"},Xe={class:"top-bar__info"},Ge={class:"top-bar__screen-title"},Qe={key:0,class:"top-bar__title"},Ze=M({__name:"TopBar",props:{screenTitle:{type:String,default:""},title:{type:String,default:""},backLink:{type:[Object,String],default:null}},setup(e){return(t,n)=>{const s=ge("RouterLink");return f(),w("div",Ye,[e.backLink?(f(),N(s,{key:0,class:"top-bar__back",to:e.backLink},{default:W(()=>[P(D(H),{name:"arrow-left",width:"24px",height:"24px"})]),_:1},8,["to"])):T("",!0),k("div",Xe,[k("h1",Ge,[C(t.$slots,"default",{},()=>[j($(e.screenTitle),1)],!0)]),e.title?(f(),w("div",Qe,$(e.title),1)):T("",!0)])])}}});const xt=A(Ze,[["__scopeId","data-v-1e6d4fe2"]]),qe=ne("training-settings",()=>({settings:ie("training-settings-state",{weightUnit:"kg"})})),Z=()=>new Date().toISOString(),$t=ne("training",()=>{const e=qe(),t=ie("training-record",{}),n=V(new Date),s=r=>{const c=new Date(r);return c.setHours(0,0,0,0),c.toISOString()},o=R(()=>{const r=s(n.value);return t.value[r]}),l=r=>n.value=r,i={reps:0,weight:0,weightUnit:e.settings.weightUnit,id:new Date().toISOString()},u={name:"",approaches:[],isBasedOnBodyWeight:!1},g=r=>{if(!o.value)return;const c=o.value.exercises[r],d=new Date().toISOString();c.approaches.length>0?c.approaches.push({...i,...c.approaches[c.approaches.length-1],id:d}):c.approaches.push({...i,id:d})},m=({approachIndex:r,exerciseIndex:c,approach:d})=>{if(!o.value)return;const a=o.value.exercises[c];!a||!a.approaches[r]||(a.approaches[r]=d)},h=({exerciseIndex:r,approachIndex:c})=>{if(!o.value)return;const d=o.value.exercises[r];d&&d.approaches.splice(c,1)},p=(r=new Date)=>{const c=r.toISOString(),d=s(r);t.value[d]||(t.value[d]={basedOnTraining:null,date:c,exercises:[],isSavedToServer:!1})},x=()=>{p()},_=r=>{l(r),p(r)},v=r=>t.value[s(r)],b=r=>delete t.value[s(r)],E=r=>{o.value&&o.value.exercises.push({...r??{...u,id:Z()}})},O=r=>{const c=v(r);c&&(delete t.value[s(new Date)],_(new Date),c.exercises.forEach(({name:d,isBasedOnBodyWeight:a})=>{E({isBasedOnBodyWeight:a,name:d,id:Z(),approaches:[]})}),o.value&&(o.value.basedOnTraining=c.date))},F=(r,c)=>{const d=v(r);d&&(d.exercises=d.exercises.filter(a=>a.id!==c))},y=(r,c)=>{if(!o.value)return;const d=v(r);d&&(d.exercises=d.exercises.map(a=>a.id===c.id?{...a,...c}:a))},I=R(()=>{var c;if(!o.value)return!0;const{exercises:r}=o.value;return r.length===0?!0:!!((c=r[r.length-1])!=null&&c.name)});return{startTraining:x,trainings:t,setSelectedDate:l,selectedDayTraining:o,deleteTraining:b,getTrainingByDate:v,startTrainingByDate:_,copyTraining:O,addExercise:E,canAddExercise:I,addApproach:g,setApproach:m,deleteApproach:h,trainingSettingsStore:e,editExercise:y,deleteExercise:F}});const et={},tt={class:"point-loader"};function nt(e,t){return f(),w("span",tt)}const st=A(et,[["render",nt]]),ot=M({__name:"VButton",props:{to:{type:[Object,String],default:null},href:{type:String,default:null},variant:{type:String,default:"default"},size:{type:String,default:"s"},theme:{type:String,default:"default"},wide:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},setup(e){const t=e,n=()=>t.to?"router-link":t.href?"a":"button",s=()=>({[`button--${t.variant}`]:t.variant!=="default",[`button--size-${t.size}`]:t.size!=="s",[`button--theme-${t.theme}`]:t.theme!=="default","button--wide":t.wide,"button--loading":t.loading,"button--disabled":t.disabled});return(o,l)=>(f(),N(ye(n()),{to:e.to,href:e.href,class:te(["button",s()])},{default:W(()=>[e.loading?(f(),N(D(st),{key:0,class:"button__loader"})):T("",!0),C(o.$slots,"default",{},void 0,!0)]),_:3},8,["to","href","class"]))}});const le=A(ot,[["__scopeId","data-v-1bc3be25"]]),rt={lbs:"Фнт",kg:"Кг"},at={class:"exercise-cart"},it={class:"exercise-cart__title"},ct={key:0,class:"exercise-cart__approaches-list"},lt={class:"exercise-cart__approach-reps"},ut={key:1,class:"exercise-cart__empty empty-message"},dt=M({__name:"ExerciseCart",props:{exercise:{},canEdit:{type:Boolean}},emits:["edit-click"],setup(e,{emit:t}){const n=t;return(s,o)=>(f(),w("li",at,[k("div",it,[j($(s.exercise.name)+" ",1),s.canEdit?(f(),w("button",{key:0,type:"button",class:"exercise-cart__edit",onClick:o[0]||(o[0]=l=>n("edit-click"))},[P(D(H),{name:"edit",width:"18",height:"18"})])):T("",!0)]),s.exercise.approaches.length?(f(),w("ul",ct,[(f(!0),w(we,null,be(s.exercise.approaches,(l,i)=>(f(),w("li",{key:i,class:"exercise-cart__approaches-list-item"},[j($(i+1)+" подход ",1),k("div",lt,[s.exercise.isBasedOnBodyWeight?(f(),N(D(H),{key:0,class:"exercise-cart__body-icon",name:"body"})):T("",!0),j(" "+$(s.exercise.isBasedOnBodyWeight?"+":null)+" "+$(l.weight)+" "+$(D(rt)[l.weightUnit])+" ",1),k("div",null," по "+$(l.reps)+" повторений ",1)])]))),128))])):(f(),w("p",ut," Подходы пока не добавлены "))]))}});const Dt=A(dt,[["__scopeId","data-v-94b4042a"]]),Ot=e=>new Intl.DateTimeFormat("ru-RU",{dateStyle:"long"}).format(new Date(e));const ft={},_t={class:"screen-layout"},pt={key:0,class:"screen-layout__header"},ht={class:"screen-layout__content container"},mt={key:1,class:"screen-layout__footer"};function vt(e,t){return f(),w("div",_t,[e.$slots.header?(f(),w("div",pt,[C(e.$slots,"header",{},void 0,!0)])):T("",!0),k("div",ht,[C(e.$slots,"default",{},void 0,!0)]),e.$slots.footer?(f(),w("div",mt,[C(e.$slots,"footer",{},void 0,!0)])):T("",!0)])}const kt=A(ft,[["render",vt],["__scopeId","data-v-608a6d2f"]]),gt=M({__name:"VIconAction",props:{icon:{},variant:{default:"default"},size:{default:"s"},theme:{default:"default"}},setup(e){return(t,n)=>(f(),N(D(le),{variant:t.variant,size:t.size,theme:t.theme,class:"icon-action"},{default:W(()=>[P(D(H),{name:t.icon},null,8,["name"])]),_:1},8,["variant","size","theme"]))}});const Tt=A(gt,[["__scopeId","data-v-ec2fd72c"]]),yt={class:"container"},wt=M({__name:"DeletionConfirmModal",props:{text:{default:"Вы действительно хотите удалить?"},buttonText:{default:"Удалить"}},emits:["confirm"],setup(e,{expose:t,emit:n}){const s=n,o=V(),l=()=>{var i;(i=o.value)==null||i.close(),s("confirm")};return t({open:()=>{var i;return(i=o.value)==null?void 0:i.open()},close:()=>{var i;return(i=o.value)==null?void 0:i.close()}}),(i,u)=>(f(),N(D(Ke),{ref_key:"bottomSheet",ref:o,title:i.text,class:"deletion-confirm-modal"},{default:W(()=>[k("div",yt,[P(D(le),{class:"deletion-confirm-modal__button",theme:"dangerous",onClick:l,size:"m",wide:""},{default:W(()=>[j($(i.buttonText),1)]),_:1})])]),_:1},8,["title"]))}});const Et=A(wt,[["__scopeId","data-v-0c9d475a"]]);export{Et as D,Dt as E,kt as S,xt as T,le as V,$t as a,Tt as b,Ke as c,qe as d,Ot as f,St as u,rt as w};
