import{d as b,L as H,o as c,a as d,h as w,s as S,l as D,u as f,V as k,e as g,g as h,M as x,b as m,t as u,_ as v,m as V,r as O,c as E,F as q,f as G}from"./index-2fb8e712.js";import{b as A,V as L,a as J}from"./VButton-e8ba25eb.js";const P={class:"top-bar container"},Q={class:"top-bar__info"},X={class:"top-bar__screen-title"},Y={key:0,class:"top-bar__title"},Z=b({__name:"TopBar",props:{screenTitle:{type:String,default:""},title:{type:String,default:""},backLink:{type:[Object,String],default:null}},setup(n){return(r,p)=>{const o=H("RouterLink");return c(),d("div",P,[n.backLink?(c(),w(o,{key:0,class:"top-bar__back",to:n.backLink},{default:S(()=>[D(f(k),{name:"arrow-left",width:"24px",height:"24px"})]),_:1},8,["to"])):g("",!0),h("div",Q,[h("h1",X,[x(r.$slots,"default",{},()=>[m(u(n.screenTitle),1)],!0)]),n.title?(c(),d("div",Y,u(n.title),1)):g("",!0)])])}}});const xe=v(Z,[["__scopeId","data-v-1e6d4fe2"]]),ee=V("training-settings",()=>({settings:A("training-settings-state",{weightUnit:"kg"})})),C=()=>new Date().toISOString(),Se=V("training",()=>{const n=ee(),r=A("training-record",{}),p=O(new Date),o=e=>{const t=new Date(e);return t.setHours(0,0,0,0),t.toISOString()},s=E(()=>{const e=o(p.value);return r.value[e]}),_=e=>p.value=e,i={reps:0,weight:0,weightUnit:n.settings.weightUnit,id:new Date().toISOString()},T={name:"",approaches:[],isBasedOnBodyWeight:!1},F=e=>{if(!s.value)return;const t=s.value.exercises[e],a=new Date().toISOString();t.approaches.length>0?t.approaches.push({...i,...t.approaches[t.approaches.length-1],id:a}):t.approaches.push({...i,id:a})},U=({approachIndex:e,exerciseIndex:t,approach:a})=>{if(!s.value)return;const l=s.value.exercises[t];!l||!l.approaches[e]||(l.approaches[e]=a)},z=({exerciseIndex:e,approachIndex:t})=>{if(!s.value)return;const a=s.value.exercises[e];a&&a.approaches.splice(t,1)},$=(e=new Date)=>{const t=e.toISOString(),a=o(e);r.value[a]||(r.value[a]={basedOnTraining:null,date:t,exercises:[],isSavedToServer:!1})},M=()=>{$()},I=e=>{_(e),$(e)},y=e=>r.value[o(e)],N=e=>delete r.value[o(e)],B=e=>{s.value&&s.value.exercises.push({...e??{...T,id:C()}})},R=e=>{const t=y(e);t&&(delete r.value[o(new Date)],I(new Date),t.exercises.forEach(({name:a,isBasedOnBodyWeight:l})=>{B({isBasedOnBodyWeight:l,name:a,id:C(),approaches:[]})}),s.value&&(s.value.basedOnTraining=t.date))},K=(e,t)=>{const a=y(e);a&&(a.exercises=a.exercises.filter(l=>l.id!==t))},W=(e,t)=>{if(!s.value)return;const a=y(e);a&&(a.exercises=a.exercises.map(l=>l.id===t.id?{...l,...t}:l))},j=E(()=>{var t;if(!s.value)return!0;const{exercises:e}=s.value;return e.length===0?!0:!!((t=e[e.length-1])!=null&&t.name)});return{startTraining:M,trainings:r,setSelectedDate:_,selectedDayTraining:s,deleteTraining:N,getTrainingByDate:y,startTrainingByDate:I,copyTraining:R,addExercise:B,canAddExercise:j,addApproach:F,setApproach:U,deleteApproach:z,trainingSettingsStore:n,editExercise:W,deleteExercise:K}}),te={lbs:"Фнт",kg:"Кг"},se={class:"exercise-cart"},ne={class:"exercise-cart__title"},ae={key:0,class:"exercise-cart__approaches-list"},re={class:"exercise-cart__approach-reps"},ie={key:1,class:"exercise-cart__empty empty-message"},oe=b({__name:"ExerciseCart",props:{exercise:{},canEdit:{type:Boolean}},emits:["edit-click"],setup(n,{emit:r}){const p=r;return(o,s)=>(c(),d("li",se,[h("div",ne,[m(u(o.exercise.name)+" ",1),o.canEdit?(c(),d("button",{key:0,type:"button",class:"exercise-cart__edit",onClick:s[0]||(s[0]=_=>p("edit-click"))},[D(f(k),{name:"edit",width:"18",height:"18"})])):g("",!0)]),o.exercise.approaches.length?(c(),d("ul",ae,[(c(!0),d(q,null,G(o.exercise.approaches,(_,i)=>(c(),d("li",{key:i,class:"exercise-cart__approaches-list-item"},[m(u(i+1)+" подход ",1),h("div",re,[o.exercise.isBasedOnBodyWeight?(c(),w(f(k),{key:0,class:"exercise-cart__body-icon",name:"body"})):g("",!0),m(" "+u(o.exercise.isBasedOnBodyWeight?"+":null)+" "+u(_.weight)+" "+u(f(te)[_.weightUnit])+" ",1),h("div",null," по "+u(_.reps)+" повторений ",1)])]))),128))])):(c(),d("p",ie," Подходы пока не добавлены "))]))}});const ke=v(oe,[["__scopeId","data-v-94b4042a"]]),be=n=>new Intl.DateTimeFormat("ru-RU",{dateStyle:"long"}).format(new Date(n));const ce={},le={class:"screen-layout"},de={key:0,class:"screen-layout__header"},_e={class:"screen-layout__content container"},ue={key:1,class:"screen-layout__footer"};function pe(n,r){return c(),d("div",le,[n.$slots.header?(c(),d("div",de,[x(n.$slots,"header",{},void 0,!0)])):g("",!0),h("div",_e,[x(n.$slots,"default",{},void 0,!0)]),n.$slots.footer?(c(),d("div",ue,[x(n.$slots,"footer",{},void 0,!0)])):g("",!0)])}const we=v(ce,[["render",pe],["__scopeId","data-v-608a6d2f"]]),fe=b({__name:"VIconAction",props:{icon:{},variant:{default:"default"},size:{default:"s"},theme:{default:"default"}},setup(n){return(r,p)=>(c(),w(f(L),{variant:r.variant,size:r.size,theme:r.theme,class:"icon-action"},{default:S(()=>[D(f(k),{name:r.icon},null,8,["name"])]),_:1},8,["variant","size","theme"]))}});const De=v(fe,[["__scopeId","data-v-ec2fd72c"]]),he={class:"container"},ge=b({__name:"DeletionConfirmModal",props:{text:{default:"Вы действительно хотите удалить?"},buttonText:{default:"Удалить"}},emits:["confirm"],setup(n,{expose:r,emit:p}){const o=p,s=O(),_=()=>{var i;(i=s.value)==null||i.close(),o("confirm")};return r({open:()=>{var i;return(i=s.value)==null?void 0:i.open()},close:()=>{var i;return(i=s.value)==null?void 0:i.close()}}),(i,T)=>(c(),w(f(J),{ref_key:"bottomSheet",ref:s,title:i.text,class:"deletion-confirm-modal"},{default:S(()=>[h("div",he,[D(f(L),{class:"deletion-confirm-modal__button",theme:"dangerous",onClick:_,size:"m",wide:""},{default:S(()=>[m(u(i.buttonText),1)]),_:1})])]),_:1},8,["title"]))}});const Te=v(ge,[["__scopeId","data-v-0c9d475a"]]);export{Te as D,ke as E,we as S,xe as T,De as V,ee as a,be as f,Se as u,te as w};
