import{d as b,L as J,o as c,a as d,h as w,s as S,l as T,u as f,V as k,e as g,g as h,M as x,b as v,t as u,_ as y,m as V,r as A,c as D,F as P,f as Q}from"./index-acc4240a.js";import{b as L,V as F,a as X}from"./VButton-e9ceffce.js";const Y={class:"top-bar container"},Z={class:"top-bar__info"},ee={class:"top-bar__screen-title"},te={key:0,class:"top-bar__title"},se=b({__name:"TopBar",props:{screenTitle:{type:String,default:""},title:{type:String,default:""},backLink:{type:[Object,String],default:null}},setup(n){return(r,_)=>{const i=J("RouterLink");return c(),d("div",Y,[n.backLink?(c(),w(i,{key:0,class:"top-bar__back",to:n.backLink},{default:S(()=>[T(f(k),{name:"arrow-left",width:"24px",height:"24px"})]),_:1},8,["to"])):g("",!0),h("div",Z,[h("h1",ee,[x(r.$slots,"default",{},()=>[v(u(n.screenTitle),1)],!0)]),n.title?(c(),d("div",te,u(n.title),1)):g("",!0)])])}}});const ke=y(se,[["__scopeId","data-v-1e6d4fe2"]]),ne=V("training-settings",()=>({settings:L("training-settings-state",{weightUnit:"kg"})})),O=()=>new Date().toISOString(),be=V("training",()=>{const n=ne(),r=L("training-record",{}),_=A(new Date),i=e=>{const t=new Date(e);return t.setHours(0,0,0,0),t.toISOString()},s=D(()=>{const e=i(_.value);return r.value[e]}),p=e=>_.value=e,o={reps:0,weight:0,id:new Date().toISOString()},I={name:"",approaches:[],isBasedOnBodyWeight:!1,weightUnit:n.settings.weightUnit},U=e=>{if(!s.value)return;const t=s.value.exercises[e],a=new Date().toISOString();t.approaches.length>0?t.approaches.push({...o,...t.approaches[t.approaches.length-1],id:a}):t.approaches.push({...o,id:a})},z=({approachIndex:e,exerciseIndex:t,approach:a})=>{if(!s.value)return;const l=s.value.exercises[t];!l||!l.approaches[e]||(l.approaches[e]=a)},M=({exerciseIndex:e,approachIndex:t})=>{if(!s.value)return;const a=s.value.exercises[e];a&&a.approaches.splice(t,1)},$=(e=new Date)=>{const t=e.toISOString(),a=i(e);r.value[a]||(r.value[a]={basedOnTraining:null,date:t,exercises:[],isSavedToServer:!1})},N=()=>{$()},B=e=>{p(e),$(e)},m=e=>r.value[i(e)],R=e=>delete r.value[i(e)],E=e=>{s.value&&s.value.exercises.push({...e??{...I,id:O()}})},K=e=>{const t=m(e);t&&(delete r.value[i(new Date)],B(new Date),t.exercises.forEach(({name:a,isBasedOnBodyWeight:l,weightUnit:C},G)=>{E({isBasedOnBodyWeight:l,weightUnit:C,name:a,id:O()+String(G),approaches:[]})}),s.value&&(s.value.basedOnTraining=t.date))},W=(e,t)=>{const a=m(e);a&&(a.exercises=a.exercises.filter(l=>l.id!==t))},j=(e,t)=>{if(!s.value)return;const a=m(e);a&&(a.exercises=a.exercises.map(l=>l.id===t.id?{...l,...t}:l))},H=D(()=>{var t;if(!s.value)return!0;const{exercises:e}=s.value;return e.length===0?!0:!!((t=e[e.length-1])!=null&&t.name)}),q=D(()=>{var t;const e=(t=s.value)==null?void 0:t.basedOnTraining;if(e)return m(new Date(e))});return{startTraining:N,trainings:r,setSelectedDate:p,selectedDayTraining:s,deleteTraining:R,getTrainingByDate:m,startTrainingByDate:B,copyTraining:K,addExercise:E,canAddExercise:H,addApproach:U,setApproach:z,deleteApproach:M,trainingSettingsStore:n,editExercise:j,deleteExercise:W,pastTraining:q}}),ae={lbs:"Фнт",kg:"Кг"},re={class:"exercise-cart"},ie={class:"exercise-cart__title"},oe={key:0,class:"exercise-cart__approaches-list"},ce={class:"exercise-cart__approach-reps"},le={key:1,class:"exercise-cart__empty empty-message"},de=b({__name:"ExerciseCard",props:{exercise:{},canEdit:{type:Boolean}},emits:["edit-click"],setup(n,{emit:r}){const _=r;return(i,s)=>(c(),d("li",re,[h("div",ie,[v(u(i.exercise.name)+" ",1),i.canEdit?(c(),d("button",{key:0,type:"button",class:"exercise-cart__edit",onClick:s[0]||(s[0]=p=>_("edit-click"))},[T(f(k),{name:"edit",width:"18",height:"18"})])):g("",!0)]),i.exercise.approaches.length?(c(),d("ul",oe,[(c(!0),d(P,null,Q(i.exercise.approaches,(p,o)=>(c(),d("li",{key:o,class:"exercise-cart__approaches-list-item"},[v(u(o+1)+" подход ",1),h("div",ce,[i.exercise.isBasedOnBodyWeight?(c(),w(f(k),{key:0,class:"exercise-cart__body-icon",name:"body"})):g("",!0),v(" "+u(i.exercise.isBasedOnBodyWeight?"+":null)+" "+u(p.weight)+" "+u(f(ae)[i.exercise.weightUnit])+" ",1),h("div",null," по "+u(p.reps)+" повторений ",1)])]))),128))])):(c(),d("p",le," Подходы пока не добавлены "))]))}});const we=y(de,[["__scopeId","data-v-83925d25"]]),Te=n=>new Intl.DateTimeFormat("ru-RU",{dateStyle:"long"}).format(new Date(n));const ue={},_e={class:"screen-layout"},pe={key:0,class:"screen-layout__header"},fe={class:"screen-layout__content container"},he={key:1,class:"screen-layout__footer"};function ge(n,r){return c(),d("div",_e,[n.$slots.header?(c(),d("div",pe,[x(n.$slots,"header",{},void 0,!0)])):g("",!0),h("div",fe,[x(n.$slots,"default",{},void 0,!0)]),n.$slots.footer?(c(),d("div",he,[x(n.$slots,"footer",{},void 0,!0)])):g("",!0)])}const De=y(ue,[["render",ge],["__scopeId","data-v-608a6d2f"]]),me=b({__name:"VIconAction",props:{icon:{},variant:{default:"default"},size:{default:"s"},theme:{default:"default"}},setup(n){return(r,_)=>(c(),w(f(F),{variant:r.variant,size:r.size,theme:r.theme,class:"icon-action"},{default:S(()=>[T(f(k),{name:r.icon},null,8,["name"])]),_:1},8,["variant","size","theme"]))}});const Ie=y(me,[["__scopeId","data-v-ec2fd72c"]]),ve={class:"container"},ye=b({__name:"DeletionConfirmModal",props:{text:{default:"Вы действительно хотите удалить?"},buttonText:{default:"Удалить"}},emits:["confirm"],setup(n,{expose:r,emit:_}){const i=_,s=A(),p=()=>{var o;(o=s.value)==null||o.close(),i("confirm")};return r({open:()=>{var o;return(o=s.value)==null?void 0:o.open()},close:()=>{var o;return(o=s.value)==null?void 0:o.close()}}),(o,I)=>(c(),w(f(X),{ref_key:"bottomSheet",ref:s,title:o.text,class:"deletion-confirm-modal"},{default:S(()=>[h("div",ve,[T(f(F),{class:"deletion-confirm-modal__button",theme:"dangerous",onClick:p,size:"m",wide:""},{default:S(()=>[v(u(o.buttonText),1)]),_:1})])]),_:1},8,["title"]))}});const $e=y(ye,[["__scopeId","data-v-0c9d475a"]]);export{$e as D,we as E,De as S,ke as T,Ie as V,ne as a,Te as f,be as u,ae as w};
